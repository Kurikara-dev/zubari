# Zubari - 要件定義書 (Version 1.0)

## 0. 本書について

本書は、建設現場向けビジュアルコミュニケーションツール「Zubari」（以下、本製品）のMVP（Minimum Viable Product）開発を外部の開発チームに委託するにあたり、その仕様と要件を定義するものです。

- **プロジェクト名:** Zubari
- **バージョン:** 1.0 (MVP)
- **作成日:** 2025年7月23日
- **対象読者:** 委託先開発チームのプロジェクトマネージャー、エンジニア、UI/UXデザイナー

---

## 1. プロジェクト概要と目的

### 1.1. 解決したい課題

建設現場では、電話や口頭、プライベートなチャットアプリ（LINE/WhatsApp）での非公式な指示・報告が原因で、「言った・言わない」問題や情報の散逸が頻発しています。これにより、手戻り工事が発生し、コスト増加や工期遅延、関係者間の信頼損失に繋がっています。

既存の建設管理ツールは多機能・高価・複雑であり、現場のチームが手軽に導入するには障壁が高すぎます。

### 1.2. プロダクトのコンセプト

**「写真と図面で、指示が消えない。言った言わないを、ゼロにする。」**

本製品は、写真や図面の上にピンを立てて、具体的な場所と指示内容をセットで記録・共有できる、極めてシンプルなコミュニケーションツールです。高機能な管理ツールと、非公式なチャットアプリの間のギャップを埋めます。

### 1.3. ターゲットユーザーとゴール

- **ターゲットユーザー:** 30代〜50代の、小〜中規模建設プロジェクトを管理する現場監督や職長。個人の裁量で月額数千円の経費を使える。
- **ゴール:** ユーザーが個人の課題解決のために自発的に使い始め（ボトムアップ導入）、その利便性から自然とチームや会社全体に利用が広がっていく（プロダクトレッドグロース）状態を目指します。

---

## 2. 料金プラン

プロダクトレッドグロース戦略を推進するため、以下の3プランを設ける。

| プラン名 | **Free** | **Pro** | **Business** |
| :--- | :--- | :--- | :--- |
| **ターゲット** | 個人、試用 | 職長、小規模チーム | 会社全体、複数現場管理 |
| **価格** | **$0** | **$19 /ユーザー/月** | **要問い合わせ** |
| **プロジェクト数** | 3つまで | **無制限** | **無制限** |
| **ストレージ** | 2GB | 50GB | **無制限** |
| **ユーザー数** | 1人 | 10人まで | **無制限** |
| **コア機能** | すべて利用可能 | すべて利用可能 | すべて利用可能 |
| **特別機能** | - | - | ・SSO対応<br>・高度な分析<br>・専任サポート |

---

## 3. MVPのスコープ定義

### 3.1. In-Scope (MVPで実装する機能)

- **ユーザー認証:**
    - メール/パスワードでのサインアップ・ログイン
    - Google / Apple アカウントでのソーシャルログイン
- **プロジェクト管理:**
    - プロジェクトの作成・一覧表示
- **メディア管理:**
    - 写真・PDF図面のアップロード・一覧表示・閲覧
- **ピン機能:**
    - 写真/図面へのピンの作成
    - ピンへのタイトル・指示内容の付与
    - ピンのステータス管理（未対応/完了）
- **コミュニケーション機能:**
    - ピンに対するコメントの投稿・閲覧
- **共有機能 (最重要):**
    - **アカウント不要**で、共有URLからピンの内容を閲覧・コメントできる機能

### 3.2. Out-of-Scope (MVPでは実装しない機能)

- 担当者の割り当て、期限設定
- レポート出力機能
- オフライン対応
- BCFなど外部規格への対応
- 他ツールとのAPI連携
- 写真への手書きマークアップ機能
- 高度なチーム管理、権限設定

---

## 4. 機能要件

### 4.1. 認証 (Auth0利用)

- **FR-001: サインアップ**
    - ユーザーはメールアドレスとパスワード、またはGoogle/Appleアカウントで登録できる。
- **FR-002: ログイン**
    - 登録した方法でログインできる。
- **FR-003: パスワードリセット**
    - ユーザーはパスワードを忘れた場合、再設定フローを利用できる。

### 4.2. プロジェクト管理

- **FR-101: プロジェクト作成**
    - ユーザーは新しいプロジェクトを任意の名前で作成できる。
- **FR-102: プロジェクト一覧**
    - ユーザーは自身が関わるプロジェクトの一覧を閲覧できる。

### 4.3. メディア管理

- **FR-201: メディアアップロード**
    - ユーザーはプロジェクト内に、写真（JPEG, PNG）およびPDF図面をアップロードできる。
- **FR-202: メディア一覧**
    - プロジェクト内のメディアがサムネイルで一覧表示される。
- **FR-203: メディア閲覧**
    - サムネイルをタップすると、メディアが全画面表示される。ピンチ操作で拡大・縮小できる。

### 4.4. ピンとコメント (コア機能)

- **FR-301: ピン作成**
    - ユーザーはメディア閲覧画面の任意の位置をタップ（または長押し）し、ピンを作成できる。
- **FR-302: ピン情報入力**
    - ピンには、タイトル（必須）、指示内容（任意）をテキストで入力できる。
- **FR-303: ピンのステータス**
    - ピンは作成時、デフォルトで「未対応(Open)」ステータスとなる。
    - ピンの作成者は、ステータスを「未対応」と「完了(Closed)」で切り替えることができる。
- **FR-304: コメント投稿**
    - 各ピンに対して、ユーザーはテキストでコメントを投稿できる。
- **FR-305: コメント閲覧**
    - コメントは時系列で表示される。

### 4.5. 共有機能 (Web共有)

- **FR-401: 共有URL発行**
    - ユーザーはピンごとに、ユニークで推測困難なURLを発行できる。
- **FR-402: 共有ページの閲覧**
    - URLにアクセスした**非ログインユーザー**は、アプリのインストールやアカウント登録なしで、Webブラウザ上で以下の情報を閲覧できる。
        - 対象の写真/図面
        - ピンの位置と情報（タイトル、指示内容）
        - コメント履歴
- **FR-403: 共有ページからのコメント**
    - 非ログインユーザーは、共有ページからコメントを投稿できる。
    - 投稿時、名前の入力を求められる（認証は不要）。

---

## 5. 非機能要件

### 5.1. 技術スタック

| 領域 | 指定技術 |
| :--- | :--- |
| **認証** | **Auth0** |
| **フロントエンド** | **Next.js (React)** |
| **バックエンド** | **Supabase (Edge Functions)** |
| **データベース** | **Supabase (PostgreSQL)** |
| **ファイルストレージ** | **Supabase Storage** |
| **ホスティング** | **Vercel & Supabase** |

### 5.2. デザイン・ブランディング
- **NFR-101:** デザインの基調となるカラーパレットは、以下の通り決定する。ロゴおよびフォントは発注者より別途提供される。
    - **Primary (主要):** `#0A4A8F` (ディープブルー)
    - **Secondary (背景など):** `#F5F7FA` (ライトグレー)
    - **Accent (ボタン、通知):** `#FF7F00` (セーフティオレンジ)
    - **Text (文字):** `#1E293B` (ダークグレー)
- **NFR-102:** UI/UXは、ITリテラシーが高くないユーザーでも、マニュアルなしで直感的に操作できるシンプルさを最優先する。
- **NFR-103:** モバイルファーストで設計し、スマートフォンのブラウザで快適に操作できること。

### 5.3. UIの文言（コピーライティング）
- **NFR-201:** UI上のボタンラベルや説明文などのテキストは、開発チーム側で機能的に正しい仮の文言（英語）を配置すること。最終的な文言（英語・日本語）は発注者側で精査・提供する。

### 5.4. パフォーマンス
- **NFR-301:** 全ページの表示は、一般的なネットワーク環境下で3秒以内を目指す。
- **NFR-302:** 写真やPDFのアップロード・ダウンロードは、ユーザーがストレスを感じない速度であること。

### 5.5. 対応言語
- **NFR-401:** UIの言語は、**英語**と**日本語**に対応する。

### 5.6. セキュリティ
- **NFR-501:** 認証はAuth0に一任する。
- **NFR-502:** ファイルストレージへのアクセスは、適切な権限を持つユーザーのみに制限されること（SupabaseのRLSを活用）。

### 5.7. 法務関連
- **NFR-601:** 本番ドメインは発注者側で取得・提供する。
- **NFR-602:** 利用規約およびプライバシーポリシーは、開発チーム側で一般的なSaaS向けのテンプレートを準備し、アプリ内に組み込むこと。最終的なリーガルチェックは発注者側で行う。

---

## 6. 成果物

- **D-001:** 本要件定義を満たすWebアプリケーションの全ソースコード（Gitリポジトリ）
- **D-002:** VercelおよびSupabase上へのデプロイ手順を記したドキュメント
- **D-003:** データベースのテーブル定義書
